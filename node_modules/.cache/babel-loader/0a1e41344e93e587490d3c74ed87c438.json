{"ast":null,"code":"var _jsxFileName = \"D:\\\\Julieth-Campos\\\\PSO\\\\src\\\\components\\\\MoodComponent.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useRef, useState } from \"react\";\nimport \"./componentCSS/moodComponent.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst MoodComponent = () => {\n  _s();\n  const grid = useRef(undefined);\n  const pin_wrap = useRef(undefined);\n  const pin = useRef(undefined);\n  const [gridN, setGridN] = useState(38);\n  const crtDisableTimeout = useRef(undefined);\n  useEffect(() => {\n    grid.current = document.querySelector(\"#grid\");\n    pin_wrap.current = document.querySelector(\".pin_wrap\");\n    pin.current = document.querySelector(\".pin\");\n    if (grid.current && pin_wrap.current) {\n      bindEvent();\n    }\n    function resetTimeout() {\n      let to = crtDisableTimeout.current;\n      clearTimeout(to);\n      to = setTimeout(() => {\n        hidePin();\n      }, 3000);\n      crtDisableTimeout.current = to;\n    }\n    function bindEvent() {\n      resetTimeout();\n      window.addEventListener(\"CY_FACE_AROUSAL_VALENCE_RESULT\", fn);\n      window.addEventListener(\"resize\", fn2);\n    }\n    function fn(evt) {\n      showPin();\n      setEmotion(evt.detail.output);\n      resetTimeout();\n    }\n    ;\n    function fn2() {\n      setDim();\n    }\n    ;\n    function setDim() {\n      if (!grid.current || grid.current.clientWidth === 0) {\n        setTimeout(() => {\n          setDim();\n        }, 10);\n      } else {\n        pin_wrap.current.style.width = grid.clientWidth + \"px\";\n        pin_wrap.current.style.height = grid.clientHeight + \"px\";\n      }\n    }\n    function setEmotion(_ref) {\n      let {\n        arousal = 0,\n        valence = 0\n      } = _ref;\n      let {\n        x,\n        y\n      } = calcCoorinate({\n        valence,\n        arousal\n      });\n      x = Math.max(x, 5.15); // check img ratio to avoid ellipse\n      y = Math.max(y, 6);\n      //console.log(x,y);\n\n      setPinPosition(x, y);\n    }\n    function calcCoorinate(_ref2) {\n      let {\n        valence = 0,\n        arousal = 0\n      } = _ref2;\n      const img_outer_width = 800;\n      const img_inner_width = 598;\n      const img_x_offset = 101;\n      const img_outer_height = 686;\n      const img_inner_height = 598;\n      const img_y_offset = 45;\n      const normalized = z => (z + 1) / 2;\n      return {\n        x: 100 * (img_x_offset + img_inner_width * normalized(valence)) / img_outer_width,\n        y: 100 * (img_y_offset + img_inner_height * normalized(arousal)) / img_outer_height\n      };\n    }\n    function setPinPosition(x, y) {\n      pin.current.style.left = `${x - 5.15}%`; // check img ratio to avoid ellipse\n      pin.current.style.bottom = `${y - 6}%`;\n    }\n    function showPin() {\n      pin.current.style.opacity = 0.7;\n    }\n    function hidePin() {\n      pin.current.style.opacity = 0;\n    }\n  }, [grid, pin, pin_wrap]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        fontSize: \"20px\"\n      },\n      children: \"Mood Component:\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: \"relative\",\n        height: \"550px\",\n        width: \"600px\"\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"wrapper\",\n        id: \"grid\",\n        children: [gridN === 38 && /*#__PURE__*/_jsxDEV(\"img\", {\n          alt: \"\",\n          src: \"baseGraph.png\",\n          style: {\n            width: \"100%\",\n            height: \"100%\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 36\n        }, this), gridN === 98 && /*#__PURE__*/_jsxDEV(\"img\", {\n          alt: \"\",\n          src: \"advancedGraph.png\",\n          style: {\n            width: \"100%\",\n            height: \"100%\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 36\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"pin_wrap\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"pin\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => {\n          setGridN(38);\n        },\n        disabled: gridN === 38,\n        children: \"38 Affects\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => {\n          setGridN(98);\n        },\n        disabled: gridN === 98,\n        children: \"98 Affects\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true);\n};\n_s(MoodComponent, \"RdbGaxyc1Pz9XMlCaUusuUUunIQ=\");\n_c = MoodComponent;\nexport default MoodComponent;\nvar _c;\n$RefreshReg$(_c, \"MoodComponent\");","map":{"version":3,"names":["useEffect","useRef","useState","MoodComponent","grid","undefined","pin_wrap","pin","gridN","setGridN","crtDisableTimeout","current","document","querySelector","bindEvent","resetTimeout","to","clearTimeout","setTimeout","hidePin","window","addEventListener","fn","fn2","evt","showPin","setEmotion","detail","output","setDim","clientWidth","style","width","height","clientHeight","arousal","valence","x","y","calcCoorinate","Math","max","setPinPosition","img_outer_width","img_inner_width","img_x_offset","img_outer_height","img_inner_height","img_y_offset","normalized","z","left","bottom","opacity","fontSize","position"],"sources":["D:/Julieth-Campos/PSO/src/components/MoodComponent.js"],"sourcesContent":["import { useEffect, useRef, useState } from \"react\";\r\nimport \"./componentCSS/moodComponent.css\"\r\n\r\nconst MoodComponent = () => {\r\n  const grid = useRef(undefined);\r\n  const pin_wrap = useRef(undefined);\r\n  const pin = useRef(undefined);\r\n  const [gridN, setGridN] = useState(38)\r\n  const crtDisableTimeout = useRef(undefined);\r\n\r\n  useEffect(() => {\r\n    grid.current = document.querySelector(\"#grid\");\r\n    pin_wrap.current = document.querySelector(\".pin_wrap\");\r\n    pin.current = document.querySelector(\".pin\");\r\n    if(grid.current && pin_wrap.current){\r\n        bindEvent();\r\n    }\r\n    function resetTimeout() {\r\n      let to = crtDisableTimeout.current;\r\n      clearTimeout(to);\r\n      to =setTimeout(() => {\r\n        hidePin()\r\n      }, 3000)\r\n\r\n      crtDisableTimeout.current= to;\r\n    }\r\n  \r\n    function bindEvent(){\r\n      resetTimeout();\r\n      window.addEventListener(\"CY_FACE_AROUSAL_VALENCE_RESULT\", fn);\r\n      window.addEventListener(\"resize\", fn2);\r\n    }\r\n  \r\n    function fn (evt) {\r\n      showPin();\r\n      setEmotion(evt.detail.output);\r\n      resetTimeout();\r\n    };\r\n\r\n    function fn2 () {\r\n      setDim();\r\n    };\r\n  \r\n    function setDim (){\r\n      if (!grid.current || grid.current.clientWidth === 0) {\r\n        setTimeout(() => {\r\n          setDim();\r\n        }, 10);\r\n      } else {\r\n        pin_wrap.current.style.width = grid.clientWidth + \"px\";\r\n        pin_wrap.current.style.height = grid.clientHeight + \"px\";\r\n      }\r\n    }\r\n  \r\n    function setEmotion ({ arousal = 0, valence = 0 }) {\r\n      let { x, y } = calcCoorinate({ valence, arousal });\r\n      x = Math.max(x, 5.15); // check img ratio to avoid ellipse\r\n      y = Math.max(y, 6);\r\n      //console.log(x,y);\r\n  \r\n      setPinPosition(x, y);\r\n    }\r\n  \r\n    function calcCoorinate ({ valence = 0, arousal = 0 }) {\r\n      const img_outer_width = 800;\r\n      const img_inner_width = 598;\r\n      const img_x_offset = 101;\r\n  \r\n      const img_outer_height = 686;\r\n      const img_inner_height = 598;\r\n      const img_y_offset = 45;\r\n  \r\n      const normalized = (z) => (z + 1) / 2;\r\n  \r\n      return {\r\n        x:\r\n          (100 * (img_x_offset + img_inner_width * normalized(valence))) /\r\n          img_outer_width,\r\n        y:\r\n          (100 * (img_y_offset + img_inner_height * normalized(arousal))) /\r\n          img_outer_height,\r\n      };\r\n    }\r\n  \r\n    function setPinPosition(x, y) {\r\n      pin.current.style.left = `${x - 5.15}%`; // check img ratio to avoid ellipse\r\n      pin.current.style.bottom = `${y - 6}%`;\r\n    }\r\n  \r\n    function showPin() {\r\n      pin.current.style.opacity = 0.7;\r\n    }\r\n  \r\n    function hidePin() {\r\n      pin.current.style.opacity = 0;\r\n    }\r\n\r\n  }, [grid, pin, pin_wrap]);\r\n\r\n  \r\n\r\n  return (\r\n    <>\r\n        <p style={{fontSize:\"20px\"}}>Mood Component:</p>\r\n        <div style={{position:\"relative\", height:\"550px\", width:\"600px\"}}>\r\n            <div className=\"wrapper\" id=\"grid\">\r\n                {(gridN === 38) && <img alt=\"\" src=\"baseGraph.png\" style={{width: \"100%\", height: \"100%\"}} />}\r\n                {(gridN === 98) && <img alt=\"\" src=\"advancedGraph.png\" style={{width: \"100%\", height: \"100%\"}} />}\r\n                <div  className=\"pin_wrap\">\r\n                    <div className=\"pin\"></div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div>\r\n            <button onClick={()=>{setGridN(38)}} disabled={gridN === 38}>38 Affects</button>\r\n            <button onClick={()=>{setGridN(98)}} disabled={gridN === 98}>98 Affects</button>\r\n        </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default MoodComponent;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}