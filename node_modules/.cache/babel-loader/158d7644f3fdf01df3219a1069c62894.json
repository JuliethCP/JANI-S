{"ast":null,"code":"/**\n * Copyright 2018 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport NodeWebSocket from 'ws';\nimport { packageVersion } from '../generated/version.js';\n/**\n * @internal\n */\nexport class NodeWebSocketTransport {\n  static create(url, headers) {\n    return new Promise((resolve, reject) => {\n      const ws = new NodeWebSocket(url, [], {\n        followRedirects: true,\n        perMessageDeflate: false,\n        maxPayload: 256 * 1024 * 1024,\n        headers: {\n          'User-Agent': `Puppeteer ${packageVersion}`,\n          ...headers\n        }\n      });\n      ws.addEventListener('open', () => {\n        return resolve(new NodeWebSocketTransport(ws));\n      });\n      ws.addEventListener('error', reject);\n    });\n  }\n  #ws;\n  onmessage;\n  onclose;\n  constructor(ws) {\n    this.#ws = ws;\n    this.#ws.addEventListener('message', event => {\n      if (this.onmessage) {\n        this.onmessage.call(null, event.data);\n      }\n    });\n    this.#ws.addEventListener('close', () => {\n      if (this.onclose) {\n        this.onclose.call(null);\n      }\n    });\n    // Silently ignore all errors - we don't know what to do with them.\n    this.#ws.addEventListener('error', () => {});\n  }\n  send(message) {\n    this.#ws.send(message);\n  }\n  close() {\n    this.#ws.close();\n  }\n}","map":{"version":3,"mappings":"AAAA;;;;;;;;;;;;;;;AAeA,OAAOA,aAAa,MAAM,IAAI;AAG9B,SAAQC,cAAc,QAAO,yBAAyB;AAEtD;;;AAGA,OAAM,MAAOC,sBAAsB;EACjC,OAAOC,MAAM,CACXC,GAAW,EACXC,OAAgC;IAEhC,OAAO,IAAIC,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAI;MACrC,MAAMC,EAAE,GAAG,IAAIT,aAAa,CAACI,GAAG,EAAE,EAAE,EAAE;QACpCM,eAAe,EAAE,IAAI;QACrBC,iBAAiB,EAAE,KAAK;QACxBC,UAAU,EAAE,GAAG,GAAG,IAAI,GAAG,IAAI;QAC7BP,OAAO,EAAE;UACP,YAAY,EAAE,aAAaJ,cAAc,EAAE;UAC3C,GAAGI;;OAEN,CAAC;MAEFI,EAAE,CAACI,gBAAgB,CAAC,MAAM,EAAE,MAAK;QAC/B,OAAON,OAAO,CAAC,IAAIL,sBAAsB,CAACO,EAAE,CAAC,CAAC;MAChD,CAAC,CAAC;MACFA,EAAE,CAACI,gBAAgB,CAAC,OAAO,EAAEL,MAAM,CAAC;IACtC,CAAC,CAAC;EACJ;EAEA,GAAG;EACHM,SAAS;EACTC,OAAO;EAEPC,YAAYP,EAAiB;IAC3B,IAAI,CAAC,GAAG,GAAGA,EAAE;IACb,IAAI,CAAC,GAAG,CAACI,gBAAgB,CAAC,SAAS,EAAEI,KAAK,IAAG;MAC3C,IAAI,IAAI,CAACH,SAAS,EAAE;QAClB,IAAI,CAACA,SAAS,CAACI,IAAI,CAAC,IAAI,EAAED,KAAK,CAACE,IAAI,CAAC;;IAEzC,CAAC,CAAC;IACF,IAAI,CAAC,GAAG,CAACN,gBAAgB,CAAC,OAAO,EAAE,MAAK;MACtC,IAAI,IAAI,CAACE,OAAO,EAAE;QAChB,IAAI,CAACA,OAAO,CAACG,IAAI,CAAC,IAAI,CAAC;;IAE3B,CAAC,CAAC;IACF;IACA,IAAI,CAAC,GAAG,CAACL,gBAAgB,CAAC,OAAO,EAAE,MAAK,CAAE,CAAC,CAAC;EAC9C;EAEAO,IAAI,CAACC,OAAe;IAClB,IAAI,CAAC,GAAG,CAACD,IAAI,CAACC,OAAO,CAAC;EACxB;EAEAC,KAAK;IACH,IAAI,CAAC,GAAG,CAACA,KAAK,EAAE;EAClB","names":["NodeWebSocket","packageVersion","NodeWebSocketTransport","create","url","headers","Promise","resolve","reject","ws","followRedirects","perMessageDeflate","maxPayload","addEventListener","onmessage","onclose","constructor","event","call","data","send","message","close"],"sources":["D:\\Julieth-Campos\\PSO\\node_modules\\puppeteer-core\\src\\node\\NodeWebSocketTransport.ts"],"sourcesContent":["/**\n * Copyright 2018 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport NodeWebSocket from 'ws';\n\nimport type {ConnectionTransport} from '../common/ConnectionTransport.js';\nimport {packageVersion} from '../generated/version.js';\n\n/**\n * @internal\n */\nexport class NodeWebSocketTransport implements ConnectionTransport {\n  static create(\n    url: string,\n    headers?: Record<string, string>\n  ): Promise<NodeWebSocketTransport> {\n    return new Promise((resolve, reject) => {\n      const ws = new NodeWebSocket(url, [], {\n        followRedirects: true,\n        perMessageDeflate: false,\n        maxPayload: 256 * 1024 * 1024, // 256Mb\n        headers: {\n          'User-Agent': `Puppeteer ${packageVersion}`,\n          ...headers,\n        },\n      });\n\n      ws.addEventListener('open', () => {\n        return resolve(new NodeWebSocketTransport(ws));\n      });\n      ws.addEventListener('error', reject);\n    });\n  }\n\n  #ws: NodeWebSocket;\n  onmessage?: (message: NodeWebSocket.Data) => void;\n  onclose?: () => void;\n\n  constructor(ws: NodeWebSocket) {\n    this.#ws = ws;\n    this.#ws.addEventListener('message', event => {\n      if (this.onmessage) {\n        this.onmessage.call(null, event.data);\n      }\n    });\n    this.#ws.addEventListener('close', () => {\n      if (this.onclose) {\n        this.onclose.call(null);\n      }\n    });\n    // Silently ignore all errors - we don't know what to do with them.\n    this.#ws.addEventListener('error', () => {});\n  }\n\n  send(message: string): void {\n    this.#ws.send(message);\n  }\n\n  close(): void {\n    this.#ws.close();\n  }\n}\n"]},"metadata":{},"sourceType":"module"}