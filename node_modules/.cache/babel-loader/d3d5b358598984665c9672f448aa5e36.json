{"ast":null,"code":"\"use strict\";\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\nvar __exportStar = this && this.__exportStar || function (m, exports) {\n  for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.cosmiconfigSync = exports.cosmiconfig = exports.defaultLoadersSync = exports.defaultLoaders = exports.metaSearchPlaces = void 0;\n/* eslint-disable @typescript-eslint/explicit-module-boundary-types */\n__exportStar(require(\"./types.js\"), exports);\nconst os_1 = __importDefault(require(\"os\"));\nconst Explorer_js_1 = require(\"./Explorer.js\");\nconst ExplorerSync_js_1 = require(\"./ExplorerSync.js\");\nconst loaders_js_1 = require(\"./loaders.js\");\nconst util_1 = require(\"./util\");\n// this needs to be hardcoded, as this is intended for end users, who can't supply options at this point\nexports.metaSearchPlaces = ['package.json', '.config.json', '.config.yaml', '.config.yml', '.config.js', '.config.ts', '.config.cjs', '.config.mjs'];\n// do not allow mutation of default loaders. Make sure it is set inside options\nexports.defaultLoaders = Object.freeze({\n  '.mjs': loaders_js_1.loadJs,\n  '.cjs': loaders_js_1.loadJs,\n  '.js': loaders_js_1.loadJs,\n  '.ts': loaders_js_1.loadTs,\n  '.json': loaders_js_1.loadJson,\n  '.yaml': loaders_js_1.loadYaml,\n  '.yml': loaders_js_1.loadYaml,\n  noExt: loaders_js_1.loadYaml\n});\nexports.defaultLoadersSync = Object.freeze({\n  '.cjs': loaders_js_1.loadJsSync,\n  '.js': loaders_js_1.loadJsSync,\n  '.ts': loaders_js_1.loadTsSync,\n  '.json': loaders_js_1.loadJson,\n  '.yaml': loaders_js_1.loadYaml,\n  '.yml': loaders_js_1.loadYaml,\n  noExt: loaders_js_1.loadYaml\n});\nconst identity = function identity(x) {\n  return x;\n};\nfunction getInternalOptions(moduleName, options) {\n  const metaExplorer = new ExplorerSync_js_1.ExplorerSync({\n    packageProp: 'cosmiconfig',\n    stopDir: process.cwd(),\n    searchPlaces: exports.metaSearchPlaces,\n    ignoreEmptySearchPlaces: false,\n    applyPackagePropertyPathToConfiguration: true,\n    loaders: exports.defaultLoaders,\n    transform: identity,\n    cache: true,\n    metaConfigFilePath: null\n  });\n  const metaConfig = metaExplorer.search();\n  if (!metaConfig) {\n    return options;\n  }\n  if (metaConfig.config?.loaders) {\n    throw new Error('Can not specify loaders in meta config file');\n  }\n  const overrideOptions = metaConfig.config ?? {};\n  if (overrideOptions.searchPlaces) {\n    overrideOptions.searchPlaces = overrideOptions.searchPlaces.map(path => path.replace('{name}', moduleName));\n  }\n  overrideOptions.metaConfigFilePath = metaConfig.filepath;\n  return {\n    ...options,\n    ...(0, util_1.removeUndefinedValuesFromObject)(overrideOptions)\n  };\n}\nfunction normalizeOptions(moduleName, options) {\n  const defaults = {\n    packageProp: moduleName,\n    searchPlaces: ['package.json', `.${moduleName}rc`, `.${moduleName}rc.json`, `.${moduleName}rc.yaml`, `.${moduleName}rc.yml`, `.${moduleName}rc.js`, `.${moduleName}rc.ts`, `.${moduleName}rc.cjs`, `.${moduleName}rc.mjs`, `.config/${moduleName}rc`, `.config/${moduleName}rc.json`, `.config/${moduleName}rc.yaml`, `.config/${moduleName}rc.yml`, `.config/${moduleName}rc.js`, `.config/${moduleName}rc.ts`, `.config/${moduleName}rc.cjs`, `.config/${moduleName}rc.mjs`, `${moduleName}.config.js`, `${moduleName}.config.ts`, `${moduleName}.config.cjs`, `${moduleName}.config.mjs`],\n    ignoreEmptySearchPlaces: true,\n    stopDir: os_1.default.homedir(),\n    cache: true,\n    transform: identity,\n    loaders: exports.defaultLoaders,\n    metaConfigFilePath: null\n  };\n  return {\n    ...defaults,\n    ...(0, util_1.removeUndefinedValuesFromObject)(options),\n    loaders: {\n      ...defaults.loaders,\n      ...options.loaders\n    }\n  };\n}\nfunction normalizeOptionsSync(moduleName, options) {\n  const defaults = {\n    packageProp: moduleName,\n    searchPlaces: ['package.json', `.${moduleName}rc`, `.${moduleName}rc.json`, `.${moduleName}rc.yaml`, `.${moduleName}rc.yml`, `.${moduleName}rc.js`, `.${moduleName}rc.ts`, `.${moduleName}rc.cjs`, `.config/${moduleName}rc`, `.config/${moduleName}rc.json`, `.config/${moduleName}rc.yaml`, `.config/${moduleName}rc.yml`, `.config/${moduleName}rc.js`, `.config/${moduleName}rc.ts`, `.config/${moduleName}rc.cjs`, `${moduleName}.config.js`, `${moduleName}.config.ts`, `${moduleName}.config.cjs`],\n    ignoreEmptySearchPlaces: true,\n    stopDir: os_1.default.homedir(),\n    cache: true,\n    transform: identity,\n    loaders: exports.defaultLoadersSync,\n    metaConfigFilePath: null\n  };\n  return {\n    ...defaults,\n    ...(0, util_1.removeUndefinedValuesFromObject)(options),\n    loaders: {\n      ...defaults.loaders,\n      ...options.loaders\n    }\n  };\n}\nfunction cosmiconfig(moduleName) {\n  let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  const internalOptions = getInternalOptions(moduleName, options);\n  const normalizedOptions = normalizeOptions(moduleName, internalOptions);\n  const explorer = new Explorer_js_1.Explorer(normalizedOptions);\n  return {\n    search: explorer.search.bind(explorer),\n    load: explorer.load.bind(explorer),\n    clearLoadCache: explorer.clearLoadCache.bind(explorer),\n    clearSearchCache: explorer.clearSearchCache.bind(explorer),\n    clearCaches: explorer.clearCaches.bind(explorer)\n  };\n}\nexports.cosmiconfig = cosmiconfig;\nfunction cosmiconfigSync(moduleName) {\n  let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  const internalOptions = getInternalOptions(moduleName, options);\n  const normalizedOptions = normalizeOptionsSync(moduleName, internalOptions);\n  const explorerSync = new ExplorerSync_js_1.ExplorerSync(normalizedOptions);\n  return {\n    search: explorerSync.search.bind(explorerSync),\n    load: explorerSync.load.bind(explorerSync),\n    clearLoadCache: explorerSync.clearLoadCache.bind(explorerSync),\n    clearSearchCache: explorerSync.clearSearchCache.bind(explorerSync),\n    clearCaches: explorerSync.clearCaches.bind(explorerSync)\n  };\n}\nexports.cosmiconfigSync = cosmiconfigSync;","map":{"version":3,"mappings":"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","names":["__exportStar","exports","Object","freeze","loaders_js_1","noExt","identity","x","getInternalOptions","moduleName","options","metaExplorer","ExplorerSync_js_1","packageProp","stopDir","process","cwd","searchPlaces","ignoreEmptySearchPlaces","applyPackagePropertyPathToConfiguration","loaders","transform","cache","metaConfigFilePath","metaConfig","search","config","Error","overrideOptions","map","path","replace","filepath","normalizeOptions","defaults","os_1","homedir","normalizeOptionsSync","cosmiconfig","internalOptions","normalizedOptions","explorer","Explorer_js_1","bind","load","clearLoadCache","clearSearchCache","clearCaches","cosmiconfigSync","explorerSync"],"sources":["../src/index.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}